## Laboratory work XI

–î–∞–Ω–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ—Å–≤–µ—â–µ–Ω–∞ –∏–∑—É—á–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∞–Ω—Å–æ–≤ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ **ngrok**

```sh
$ open https://ngrok.com/
```

## Tasks

- [ ] 1. –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ —É—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- [ ] 2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —É—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- [ ] 3. –°–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ª–∏—á–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ **Slack**

## Tutorial
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥. –°–æ–∑–¥–∞—ë–º –¥–≤–µ –ø–∞–ø–∫–∏ install –∏ tmp. –ó–∞–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é HOME_PREFIX, –ø–æ—Å–ª–µ –≤—ã–≤–æ–¥–∏–º –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ. –ó–∞–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é USERNAME
```sh
$ cd ~
$ mkdir install
$ mkdir tmp
$ export HOME_PREFIX=`pwd`/install
$ echo $HOME_PREFIX
$ export USERNAME=`whoami`
```
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É tmp
```sh
$ cd tmp
```
–°–∫–∞—á–∏–≤–∞–µ–º –∞—Ä—Ö–∏–≤, –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –µ–≥–æ –∏ –≤—ã–≤–æ–¥–∏–º —Ç–æ, —á—Ç–æ –≤ –Ω—ë–º –±—ã–ª–æ. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É libevent-2.1.8-stable. –î–∞–ª—å—à–µ —É–∫–∞–∑—ã–≤–∞–µ–º, –≥–¥–µ –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∞. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –ø—Ä–µ–¥—ã–¥—É—â—É—é –ø–∞–ø–∫—É. libevent (–∏–∑ –≤–∏–∫–∏–ø–µ–¥–∏–∏) –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ–±—ã—Ç–∏—è—Ö. –ù—É–∂–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å libevent API
```sh
$ wget https://github.com/libevent/libevent/releases/download/release-2.1.8-stable/libevent-2.1.8-stable.tar.gz
$ tar -xvzf libevent-2.1.8-stable.tar.gz
$ cd libevent-2.1.8-stable
$ ./configure --prefix=${HOME_PREFIX}
$ make && make install
$ cd ..
```
–ó–¥–µ—Å—å –¥–µ–π—Å—Ç–≤–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã. ncurses (–∏–∑ –≤–∏–∫–∏–ø–µ–¥–∏–∏) –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ —è–∑—ã–∫–∞—Ö –°–∏ –∏ –ê–¥–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–≤–æ–¥–æ–º-–≤—ã–≤–æ–¥–æ–º –Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª, –≤ —á–∏—Å–ª–µ –ø—Ä–æ—á–µ–≥–æ, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —ç–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–≤ –∑–Ω–∞–∫–æ–º–µ—Å—Ç–∞—Ö) –∏ —Ü–≤–µ—Ç –≤—ã–≤–æ–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.
```sh
$ wget http://invisible-island.net/datafiles/release/ncurses.tar.gz
$ tar -xvzf ncurses.tar.gz
$ cd ncurses-5.9
$ ./configure --prefix=${HOME_PREFIX}
$ make && make install
$ cd ..
```
–î–µ–π—Å—Ç–≤–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏–º.Tmux (—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏ –≤ 1 –æ–∫–Ω–µ. –í–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–∫–æ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ. 

```sh
$ wget https://github.com/tmux/tmux/releases/download/2.5/tmux-2.5.tar.gz
$ tar -xvzf tmux-2.5.tar.gz
$ cd tmux-2.5
$ ./configure --prefix=${HOME_PREFIX} CFLAGS="-I${HOME_PREFIX}/include -I${HOME_PREFIX}/include/ncurses" LDFLAGS="-L${HOME_PREFIX}/lib"
$ make && make install
$ cd ..
```
–°–∫–∞—á–∏–≤–∞–µ–º –∞—Ä—Ö–∏–≤ —Å ngrok, —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –µ–≥–æ. –ü–µ—Ä–µ–º–µ—â–∞–µ–º –ø–∞–ø–∫—É —Å ngrok –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é bin
```sh
$ wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip
$ unzip ngrok-stable-linux-amd64.zip
$ mv ngrok ${HOME_PREFIX}/bin
```
–ó–∞–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ LD_LIBRARY_PATH –∏ PATH. –ó–∞–ø—É—Å–∫–∞–µ–º tmux
```sh
$ export LD_LIBRARY_PATH=${HOME_PREFIX}/lib
$ export PATH="${HOME_PREFIX}/bin:${PATH}"
$ tmux
```
–ü–µ—Ä–µ–∑–æ–¥–∏–º –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –∏ —É–¥–∞–ª—è–µ–º tmp –∏ install
```sh
$ cd ~
$ rm -rf tmp install
```
–î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏ tmux –∏ ngrok
```sh
$ brew install tmux ngrok # or use linuxbrew üéâ
```
–ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
```sh
$ tmux new -s session_with_group
```
–û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–∞–π—Ç, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—Å—è. –ü—Ä–∏–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π NGROK_TOKEN –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞. –£–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ. –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Ä—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ SSH
```sh
# Alisa:
$ open https://ngrok.com/signup
$ export NGROK_TOKEN=<—Ç–æ–∫–µ–Ω>
$ ngrok authtoken ${NGROK_TOKEN}
$ ngrok tcp 22
<–ø–æ—Ä—Ç_ngrok_—Å–µ—Ä–≤–µ—Ä–∞>
```
–ü–æ–¥–∫–ª—é—á–µ–º—Å—è –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–æ–≤–æ–π —Å–µ—Å—Å–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
```sh
# Bob:
$ ssh ${USERNAME}@0.tcp.ngrok.io -p<–ø–æ—Ä—Ç_ngrok_—Å–µ—Ä–≤–µ—Ä–∞>
<–ø–∞—Ä–æ–ª—å_–æ—Ç_—É—á–µ—Ç–Ω–æ–π_–∑–∞–ø–∏—Å–∏>
$ tmux a -t session_with_group
$ <C-B>"
```

## Links

- [Tmux](https://raw.githubusercontent.com/tmux/tmux/master/README)
- [Libevent](http://libevent.org)
- [Ncurses](http://invisible-island.net/ncurses/)

```
Copyright (c) 2015-2021 The ISC Authors
```
